!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="C:\\dist",o(o.s=7)}([function(e,t,o){"use strict";var r,n;o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n}),function(e){e.GO_TO_PAGE="goToPage",e.ADD_SHOP_ITEM="addShopItem"}(r||(r={})),function(e){e.READY="ready"}(n||(n={}))},function(e,t,o){"use strict";o.d(t,"a",function(){return r});class r{constructor(e){this._loggerEl=document.getElementById(e)}add(e){const t=document.createElement("li");t.classList.add("event-log__item"),e.timestamp=new Date,t.innerHTML=JSON.stringify(e),this._loggerEl.appendChild(t),this._loggerEl.scrollTo(0,this._loggerEl.scrollHeight)}clear(){this._loggerEl.innerHTML=""}}},function(e,t,o){},,,,,function(e,t,o){"use strict";o.r(t);o(2);var r=o(1),n=o(0);class d{constructor(e,t){void 0!==t&&t.url?this._injectIFramedFlipbook(e,t.url):"string"==typeof e?this._iFramedFlipbook=document.getElementById(e):e.nodeType===Node.ELEMENT_NODE&&"iframe"===e.tagName.toLowerCase()&&(this._iFramedFlipbook=e),this._readyPromise=new Promise(e=>{window.addEventListener("message",t=>{t.data===n.b.READY&&e()},!1)})}ready(){return this._readyPromise}destroy(){return new Promise(e=>{this.getIFrameElement().remove(),e()})}getIFrameElement(){return this._iFramedFlipbook}goToPage(e){this._postMessage({action:n.a.GO_TO_PAGE,data:e})}addShopItem(e){this._postMessage({action:n.a.ADD_SHOP_ITEM,data:e})}_postMessage(e){this._iFramedFlipbook.contentWindow.postMessage(e,"*")}_injectIFramedFlipbook(e,t){let o;if("string"==typeof e){(o=document.createElement("iframe")).src=t,o.classList.add("embedded-flipbook");const r=document.getElementById(e);r.parentNode.insertBefore(o,r.nextSibling),r.remove()}else e.nodeType===Node.ELEMENT_NODE&&"iframe"===e.tagName.toLowerCase()&&((o=e).src=t);this._iFramedFlipbook=o}}const i={flipbook1:new d("flipbook1")},a={flipbook1:new r.a("logger1"),flipbook2:new r.a("logger2")};i.flipbook1.ready().then(()=>{a.flipbook1.add({event:"Embedded flipbook has triggered DOMready"})}),document.getElementById("instantiate-embedded-flipbook").addEventListener("click",e=>{i.flipbook2=new d("flipbook2",{url:"./embedded/flipbook.html"}),document.getElementById("flipbook2-actions").style.display="block",i.flipbook2.ready().then(()=>{a.flipbook2.add({event:"Embedded flipbook has triggered DOMready"})}),e.target.disabled=!0,document.getElementById("destroy-embedded-flipbook").disabled=!1}),document.getElementById("destroy-embedded-flipbook").addEventListener("click",e=>{const t=i.flipbook2.getIFrameElement(),o=document.createElement("div");t.parentNode.insertBefore(o,t.nextSibling),i.flipbook2.destroy().then(()=>{a.flipbook2.add({event:"Embedded flipbook destroyed"}),o.id="flipbook2",o.classList.add("flipbook-placeholder"),o.innerHTML="Placeholder",e.target.disabled=!0,document.getElementById("instantiate-embedded-flipbook").disabled=!1})}),Array.from(document.querySelectorAll(".action--go-to-page")).forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-target"),o=document.querySelector(`.action--go-to-page__value[data-target="${t}"]`);i[t].goToPage(+o.value)})}),Array.from(document.querySelectorAll(".action--add-shop-item")).forEach(e=>{e.addEventListener("click",e=>{const t=e.target,o=t.getAttribute("data-target"),r=document.querySelector(`.action--add-shop-item__value[data-target="${t.getAttribute("data-target")}"]`);i[o].addShopItem(JSON.parse(r.value))})})}]);