!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="C:\\dist",o(o.s=7)}([function(e,t,o){"use strict";var n,r;o.d(t,"a",function(){return n}),o.d(t,"b",function(){return r}),function(e){e.GO_TO_PAGE="goToPage",e.ADD_SHOP_ITEM="addShopItem"}(n||(n={})),function(e){e.READY="ready",e.AFTER_PAGE_CHANGE="afterPageChange",e.AFTER_SHOP_ITEM_ADDED="afterShopItemAdded"}(r||(r={}))},function(e,t,o){"use strict";o.d(t,"a",function(){return n});class n{constructor(e){this._loggerEl=document.getElementById(e)}add(e){const t=document.createElement("li");t.classList.add("event-log__item"),e.timestamp=new Date,t.innerHTML=JSON.stringify(e),this._loggerEl.appendChild(t),this._loggerEl.scrollTo(0,this._loggerEl.scrollHeight)}clear(){this._loggerEl.innerHTML=""}}},function(e,t,o){},,,,,function(e,t,o){"use strict";o.r(t);o(2);var n=o(1),r=o(0);class d{constructor(e,t){void 0!==t&&t.url?this._injectIFramedFlipbook(e,t.url):"string"==typeof e?this._iFramedFlipbook=document.getElementById(e):e.nodeType===Node.ELEMENT_NODE&&"iframe"===e.tagName.toLowerCase()&&(this._iFramedFlipbook=e),this._readyPromise=new Promise(e=>{window.addEventListener("message",function t(o){o.data===r.b.READY&&(window.removeEventListener("message",t,!1),e())},!1)})}on(e,t){window.addEventListener("message",o=>{o.source===this._iFramedFlipbook.contentWindow&&o.data===e&&"function"==typeof t&&t()})}ready(){return this._readyPromise}destroy(){return new Promise(e=>{this.getIFrameElement().remove(),e()})}getIFrameElement(){return this._iFramedFlipbook}goToPage(e){this._postMessage({action:r.a.GO_TO_PAGE,data:e})}addShopItem(e){this._postMessage({action:r.a.ADD_SHOP_ITEM,data:e})}_postMessage(e){this._iFramedFlipbook.contentWindow.postMessage(e,"*")}_injectIFramedFlipbook(e,t){let o;if("string"==typeof e){(o=document.createElement("iframe")).src=t,o.classList.add("embedded-flipbook");const n=document.getElementById(e);n.parentNode.insertBefore(o,n.nextSibling),n.remove()}else e.nodeType===Node.ELEMENT_NODE&&"iframe"===e.tagName.toLowerCase()&&((o=e).src=t);this._iFramedFlipbook=o}}const i={flipbook1:new d("flipbook1")},a={flipbook1:new n.a("logger1"),flipbook2:new n.a("logger2")};i.flipbook1.ready().then(()=>a.flipbook1.add({event:"Embedded flipbook has triggered DOMready"})),i.flipbook1.on(r.b.AFTER_PAGE_CHANGE,()=>a.flipbook1.add({event:r.b.AFTER_PAGE_CHANGE})),i.flipbook1.on(r.b.AFTER_SHOP_ITEM_ADDED,()=>a.flipbook1.add({event:r.b.AFTER_SHOP_ITEM_ADDED})),document.getElementById("instantiate-embedded-flipbook").addEventListener("click",e=>{i.flipbook2=new d("flipbook2",{url:"./embedded/flipbook.html"}),document.getElementById("flipbook2-actions").style.display="block",i.flipbook2.ready().then(()=>a.flipbook2.add({event:"Embedded flipbook has triggered DOMready"})),i.flipbook2.on(r.b.AFTER_PAGE_CHANGE,()=>a.flipbook2.add({event:r.b.AFTER_PAGE_CHANGE})),i.flipbook2.on(r.b.AFTER_SHOP_ITEM_ADDED,()=>a.flipbook2.add({event:r.b.AFTER_SHOP_ITEM_ADDED})),e.target.disabled=!0,document.getElementById("destroy-embedded-flipbook").disabled=!1}),document.getElementById("destroy-embedded-flipbook").addEventListener("click",e=>{const t=i.flipbook2.getIFrameElement(),o=document.createElement("div");t.parentNode.insertBefore(o,t.nextSibling),i.flipbook2.destroy().then(()=>{a.flipbook2.add({event:"Embedded flipbook destroyed"}),o.id="flipbook2",o.classList.add("flipbook-placeholder"),o.innerHTML="Placeholder",e.target.disabled=!0,document.getElementById("instantiate-embedded-flipbook").disabled=!1})}),Array.from(document.querySelectorAll(".action--go-to-page")).forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-target"),o=document.querySelector(`.action--go-to-page__value[data-target="${t}"]`);i[t].goToPage(+o.value)})}),Array.from(document.querySelectorAll(".action--add-shop-item")).forEach(e=>{e.addEventListener("click",e=>{const t=e.target,o=t.getAttribute("data-target"),n=document.querySelector(`.action--add-shop-item__value[data-target="${t.getAttribute("data-target")}"]`);i[o].addShopItem(JSON.parse(n.value))})})}]);